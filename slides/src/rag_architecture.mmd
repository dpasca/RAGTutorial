flowchart LR
    A[User Query] --> B{Need Context?}:::decision

    %% Direct Path
    B -->|No| D[Direct LLM]:::secondary

    %% RAG Path
    B -->|Yes| C[RAG Pipeline]:::tertiary

    %% RAG Pipeline Steps
    C --> E[Doc Retrieval]:::tertiary
    E --> F[Context Enrichment]:::tertiary
    F --> G[Augmented LLM]:::tertiary

    %% Final Response
    D --> H[Response]:::quaternary
    G --> H